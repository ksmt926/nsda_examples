sda_examples(Network Security Through Data Analysis)
====

## Description
　ネットワークセキュリティにおいて、状況認識が重要。本当に守りたいものだけを保護し防御することが最も効果的な戦略

#### ネットワークデータ収集
 - 網羅性と冗長性のバランスを考慮し、センサーの配置、種類、アクセションを決定させる

##### センサー種類

 - ネットワーク型
    - 膨大なデータ量のため、データ量を抑制する必要がある。
      抑制方法として、循環バッファを利用、パケットの長さを制限、BNFなどのパケットフィルタ
      
    - 暗号化されているデータは読めない可能性が高い
      
    - イーサネットヘッダで最も重要な領域は、送信元と送信先との2つのMACアドレス
    
    ```
    tcpdump -i eth0 -s 0 -w result '((src port 80 || src port 443))' && (src net <ip_address>)
    ```
    
    - NetFlow
      ネットワークトラフィックセッションを要約するツール
    
 - ホスト型
    - サービスによって、ログフォーマットが異なる
    - ログ改ざんや消去の可能性が高い
    
 - サービス型
    - サービスによって、ログフォーマットが異なる
    - ログ改ざんや消去の可能性が高い
    
##### アクション（センサーによるデータの処理）

 - レポート生成型
 - イベント通知型
 - 自動防御型
 
#### ログ
 優れたセキュリティログは、説明的で、他のデータと関連付けができ、完全なものである。ログ転送にはsyslog(時刻、ファシリティ、深刻度、テキストメッセージなど含む)
 
 - 時間をエポック時間に変換
   タイムゾーンや夏時間などを気にする必要がなくなるため
   
 - センサーの同期
 
 - アドレス情報を入れること
   フロー5タプル(送信元IP,送信先IP,送信元ポート,送信先ポート,プロトコル)を入れる
 
 - ロガーが区切り文字を理解できるようにさせる
   
 - 可能な限りテキストでなくエラーコードを利用
   エラーメッセージとして、テキストはサイズが大きく解析を複雑化させるため

#### 着目すべきHTTPヘッダ
RFC4229(https://www.ietf.org/rfc/rfc4229.txt)の中で、監視に不可欠なヘッダ

 - Cookie
 - Host
 - Referer
 - User-Agent
 
 
## Reference

#### Network Security Through Data Analysis
http://shop.oreilly.com/product/0636920028444.do

